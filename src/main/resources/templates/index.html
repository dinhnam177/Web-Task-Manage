<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Welcom to My tasks</title>
    <link rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}">
</head>
<body>
<div>
    <div class="container-fluid text-center">
        <h3 style="margin: 20px"> List Task </h3>
    </div>
    <div style="overflow: auto">
        <div class="headerButton" style="float: left; margin-left: 30px">
            <button type="button" class="btn btn-secondary">Export CSV</button>
            <button type="button" class="btn btn-primary"><a style="color: #fff; text-decoration: none;"
                                                             th:href="@{/addTask}">Add Task</a></button>
        </div>
        <div style="margin-right: 30px">
            <form action="/tasks" method="GET">
                <select type="button" class="btn btn-primary selectAction" style="float: right;"
                        onchange="this.form.submit()" name="action">
                    <option selected disabled hidden th:text="${actionView}"></option>
                    <option value="Open">Open</option>
                    <option value="Inprogress">Inprogress</option>
                    <option value="Done">Done</option>
                    <option value="All">All</option>
                </select>
            </form>
            <form class="input-group mb-3 searchTask" action="/tasks" method="GET"
                  style="float: right; max-width: 20rem; margin-right: 1rem;">
                <input type="text" class="form-control" placeholder="Từ khóa" name="search" style="margin-right: 10px">
                <input type="submit" class="btn btn-primary" value="Tìm kiếm">
            </form>
        </div>
    </div>
    <div class="container-fluid text-center">
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>ID</th>
                <th>Tiêu đề</th>
                <th>Trạng thái</th>
                <th>Action</th>
            </tr>
            </thead>
            <tbody>
            <th:block th:each="task: ${page.content}">
                <tr>
                    <td>[[${task.id}]]</td>
                    <td>[[${task.taskName}]]</td>
                    <td>[[${task.taskStatus}]]</td>
                    <td>
                        <button type="button" class="btn btn-primary"><a style="color: white; text-decoration: none"
                                                                         th:href="@{'/editTask/' + ${task.id}}">Chỉnh
                            sửa</a></button>
                        <button type="button" class="btn btn-primary"><a style="color: white; text-decoration: none"
                                                                         th:href="@{'/detailTask/' + ${task.id}}">Chi
                            tiết</a></button>
                        <button type="button" class="btn btn-danger"><a style="color: white; text-decoration: none"
                                                                        th:href="@{'/deleteTask/' + ${task.id}}">Xoá</a>
                        </button>
                    </td>
                </tr>
            </th:block>
            </tbody>
        </table>
    </div>
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
            <li class="page-item" th:classappend="(${page.number}>=1) ? '' : disabled">
                <a class="page-link" th:href="@{/tasks(search=${search},action=${action} , p=${page.number}-1)}"><<</a>
            </li>
            <li class="page-item" th:if="${page.number}>=1">
                <a class="page-link" th:href="@{/tasks(search=${search},action=${action} , p=${page.number}-1)}"
                   th:text="(${page.number})"></a>
            </li>
            <li class="page-item disabled">
                <a class="page-link" style="font-weight: bold;" tabindex="-1" aria-disabled="true" href="#"
                   th:text="(${page.number}+1)"></a>
            </li>
            <li class="page-item" th:if="${page.number}<${page.totalPages}-1">
                <a class="page-link" th:href="@{/tasks(search=${search},action=${action} , p=${page.number + 1})}"
                   th:text="(${page.number}+2)"></a>
            </li>
            <li class="page-item" th:classappend="(${page.number}<${page.totalPages}-1) ? '' : disabled">
                <a class="page-link" th:href="@{/tasks(search=${search},action=${action} , p=${page.number}+1)}">>></a>
            </li>
        </ul>
    </nav>
</div>
</body>
</html>